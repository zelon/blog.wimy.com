<!DOCTYPE html>
<html>
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-351021-7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-351021-7');
    </script>

    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <link rel="stylesheet" type="text/css" media="screen" href="/style.css">
	<title>유튜브 동영상 다운받는 프로그램 만들기 : zelon's blog</title>
  </head>
  <body>
    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <h1><a href="/">Zelon's Blog</a></h1>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <div id="post_title"><h1><a href="/302">유튜브 동영상 다운받는 프로그램 만들기</a></h1></div>
        <div id="post_datetime">2010-03-01 13:14:08</div>

        <div id="post_content">
          <p> 우연히 유뷰브 동영상을 다운받는 프로그램의 소스를 보게 되어서 파이썬으로 직접 코드를 짜면서 따라가보았다. 생각보다 간단하지만, 한단계를 거쳐서 가야해서 조금 번거롭기는 하다. 다음과 같은 과정으로 플래시 동영상 파일인 flv 파일을 다운받을 수 있다.</p>

<ol>
<li>원하는 video id 를 얻는다. 이건 보통 play 하는 url 에, v=???? 라며 적혀있다.</li>
<li>특정 url 에 원하는 video id 를 넣어서 토큰(token)이라는 걸 얻는다.</li>
<li><p>다시 특정 url 에 원하는 video id 와 앞에서 얻은 토큰을 얻어서 다운로드를 한다.</p>

<p> 파이썬으로 만들어본 코드는 다음과 같다. 가장 간단한 과정을 모두 보여주므로, win32 나 C# 으로 이 과정대로 따라 만들면 쉽게 만들 수 있을것 같다.</p></li>
</ol>

<blockquote>
  <p>import urllib<br />
  import re<br />
  def testmain():<br />
      videoid = "KIvwdpYII7s"<br />
      url = u"<a href="http://www.youtube.com/get_video_info?video_id=%s&amp;el=embedded&amp;ps=default&amp;eurl=">http://www.youtube.com/get_video_info?video_id=%s&amp;el=embedded&amp;ps=default&amp;eurl=</a>" % videoid<br />
      f = urllib.urlopen(url)<br />
      info = urllib.unquote(f.read())<br />
      r = "token=(.*?)&amp;"<br />
      token = re.findall(r, info)[1]<br />
      downloadurl = u"<a href="http://www.youtube.com/get_video?video_id=%s&amp;t=%s&amp;eurl=&amp;el=embedded&amp;ps=default">http://www.youtube.com/get_video?video_id=%s&amp;t=%s&amp;eurl=&amp;el=embedded&amp;ps=default</a>" % (videoid, token)<br />
      downloadWebRequest = urllib.urlopen(downloadurl)<br />
      outfile = open("a.flv", "wb")<br />
      outfile.write(downloadWebRequest.read())<br />
      outfile.close()<br />
     <br />
  if __name__ == "__main__":<br />
      testmain()</p>
</blockquote>

<p> pop.wimy.com 와 연계하면 재미있는 프로그램이 나올수도 있을것같다 ^^</p>

        </div>

        <div id="comment">
  <div id="disqus_thread"></div>
    <script>
    var disqus_config = function () {
    this.page.url = 'http://blog.wimy.com/302';
    this.page.identifier = '302';
    };
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://wimyblog.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>



      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">by <a href="https://github.com/zelon">zelon</a></p>
        <p align="right"><a href="/rss"><img src="/rss/rss.png"/></a></p>
      </footer>
    </div>
  </body>
</html>
